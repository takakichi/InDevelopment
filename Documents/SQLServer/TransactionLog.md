#

初期設定ではSQL Serverのトランザクションログの上限の指定がありません。
そのため、放置しているとファイルサイズが拡張して、とんでもない大きさになってしまいます。

そこで、実際にトランザクションログの削除してファイルサイズを小さくしてみます。

まず、「DBCC SQLPERF('LOGSPACE')」を使用して、トランザクションログの使用状況を確認します。

データベース名、ログサイズ、使用率などが一覧表示されます。

トランザクションログの削除します。

BACKUP LOG TO DISK = N'NUL'
GO

には、トランザクションログを削除するデータベース名を指定します。
バックアップ先は「NUL」nulを指定して削除します。
保存したい場合はファイルパスを記述します。

もう一度、「DBCC SQLPERF('LOGSPACE')」を使用して、トランザクションログの使用状況を確認しましょう。

ここでは、ログのファイル内の領域が空くだけで、ログのファイルサイズは変化しません。

続いてトランザクションログのファイルサイズを小さくします。

まず、次のSQLを実行して、トランザクションログの論理名を取得します。
USE
SELECT * FROM sys.database_files

SQL実行結果のnameカラムが論理名になります。
取得した論理名()とファイルサイズ[MB]を指定します。

DBCC SHRINKFILE(, 10000)
GO

トランザクションログのファイルサイズを小さくなっていると思います。
[DBCC SQLPERF('LOGSPACE')] を使用して、トランザクションログの使用状況を確認しましょう。

私が、実際にやってみたときは、思ったようにトランザクションログの
ファイルサイズを小さくなりませんでした。

そこで、トランザクションログの削除を、もう一度実行していから
続いてトランザクションログのファイルサイズを小さくすると出来ました。

以上